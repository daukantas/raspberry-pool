{"version":3,"sources":["../../../../../src/modules/raspberries/components/raspberry/ActionsComponent.jsx"],"names":["ActionsComponent","render","raspberries","sendAction","flat","props","length","availableActions","map","action","filter","r","online","isVisible","value","raspberry","isInProgress","name","actions","propTypes","bool","array","isRequired","func"],"mappings":";;;;;;kQAAA;;;AACA;;;;AACA;;;;AACA;;;;;;AAEe,MAAMA,gBAAN,8BAA6C;;AAO1DC,WAAS;AACP,UAAM,EAAEC,WAAF,EAAeC,UAAf,EAA2BC,IAA3B,KAAoC,KAAKC,KAA/C;;AAEA,QAAI,CAACH,WAAD,IAAgB,CAACA,YAAYI,MAAjC,EAAyC;AACvC,aAAO,uCAAK,WAAU,SAAf,GAAP;AACD;;AAED,UAAMC,mBAAmB,2BACtBC,GADsB,CAClBC,uBACAA,MADA;AAEHP,mBAAaA,YAAYQ,MAAZ,CAAmBC,KAAKA,EAAEC,MAAF,IAAYH,OAAOI,SAAP,CAAiBF,CAAjB,CAApC;AAFV,MADkB,EAKtBD,MALsB,CAKfD,UAAUA,OAAOP,WAAP,CAAmBI,MAAnB,GAA4B,CALvB,CAAzB;;AAOA,QAAI,CAACC,iBAAiBD,MAAtB,EAA8B;AAC5B,aAAO,uCAAK,WAAU,SAAf,GAAP;AACD;;AAED,WAAQ;AAAA;AAAA,QAAK,WAAY,2BAAyB,CAACF,IAAD,GAAQ,EAAR,GAAa,OAAQ,GAA/D;AAAA;AAEN;AAAA;AAAA,UAAI,WAAU,MAAd;AACGG,yBAAiBC,GAAjB,CAAqBC,UACpB;AAAA;AAAA;AACE,iBAAKA,OAAOK,KADd;AAEE,qBAAS,MAAM;AACb,oBAAMZ,cAAcO,OAAOP,WAAP,CAAmBQ,MAAnB,CAA0BK,aAC5C,CAACN,OAAOO,YAAP,CAAoBD,SAApB,CADiB,CAApB;AAGA,kBAAIb,YAAYI,MAAhB,EAAwB;AACtB,uBAAOH,WAAWD,WAAX,EAAwBO,OAAOK,KAA/B,CAAP;AACD;AACF;AATH;AAWGL,iBAAOQ,IAXV;AAYE;AACE,oBAAQ,CAAC,CAACf,YAAYQ,MAAZ,CAAmBK,aAC1BA,UAAUG,OAAV,IAAqBH,UAAUG,OAAV,CAAkBT,OAAOK,KAAzB,MAAoC,SAA1D,IACIL,OAAOO,YAAP,CAAoBD,SAApB,CAFI,EAGPT;AAJL;AAZF,SADD;AADH;AAFM,KAAR;AA0BD;AAnDyD;kBAAvCN,gB;AAAAA,gB,CACZmB,S,GAAY;AACjBf,QAAM,iBAAUgB,IADC;AAEjBlB,eAAa,iBAAUmB,KAAV,CAAgBC,UAFZ;AAGjBnB,cAAY,iBAAUoB,IAAV,CAAeD;AAHV,C","file":"ActionsComponent.jsx","sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React, { PureComponent, PropTypes } from 'react';\nimport actions from '../../raspberryActions';\nimport Spinner from '../../../common/components/SpinnerComponent';\n\nexport default class ActionsComponent extends PureComponent {\n  static propTypes = {\n    flat: PropTypes.bool,\n    raspberries: PropTypes.array.isRequired,\n    sendAction: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const { raspberries, sendAction, flat } = this.props;\n\n    if (!raspberries || !raspberries.length) {\n      return <div className=\"actions\" />;\n    }\n\n    const availableActions = actions\n      .map(action => ({\n        ...action,\n        raspberries: raspberries.filter(r => r.online && action.isVisible(r)),\n      }))\n      .filter(action => action.raspberries.length > 0);\n\n    if (!availableActions.length) {\n      return <div className=\"actions\" />;\n    }\n\n    return (<div className={`actions dropdown button${!flat ? '' : ' flat'}`}>\n      Actions\n      <ul className=\"list\">\n        {availableActions.map(action => (\n          <li\n            key={action.value}\n            onClick={() => {\n              const raspberries = action.raspberries.filter(raspberry => (\n                !action.isInProgress(raspberry)\n              ));\n              if (raspberries.length) {\n                return sendAction(raspberries, action.value);\n              }\n            }}\n          >\n            {action.name}\n            <Spinner\n              active={!!raspberries.filter(raspberry => (\n                (raspberry.actions && raspberry.actions[action.value] === 'sending')\n                 || action.isInProgress(raspberry)\n              )).length}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>);\n  }\n}\n"]}