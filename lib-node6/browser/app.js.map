{"version":3,"sources":["../../src/browser/app.js"],"names":["moduleDescriptors","app","appVersion","window","VERSION","start","console","log","init","document","getElementById","catchErrors","use","MODULE_IDENTIFIER","initialRender","initialData","run"],"mappings":";;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;IAAYA,iB;;;;;;2cARZ;;;AAUA,MAAMC,MAAM,mBAAZ;AACAA,IAAIC,UAAJ,GAAiBC,OAAOC,OAAxB;;AAEAH,IAAII,KAAJ,mBAAU,aAAY;AACpBC,UAAQC,GAAR,CAAY,OAAZ;AACA;AACA,QAAMN,IAAIO,IAAJ,EAAN;AACA,mBAAUP,GAAV;AACA,+BAAWQ,SAASC,cAAT,CAAwB,KAAxB,CAAX,EAA2CT,GAA3C;;AAEA;AACAA,MAAIU,WAAJ;AACAV,MAAIW,GAAJ,CAAQ,yEAAmCX,GAAnC,CAAR;;AAEA,MAAIE,OAAOU,iBAAX,EAA8B;AAC5B,UAAMZ,IAAIa,aAAJ,CAAkBd,kBAAkBG,OAAOU,iBAAzB,CAAlB,EAA+DV,OAAOY,WAAtE,CAAN;AACD;;AAED,QAAMd,IAAIe,GAAJ,EAAN;AACD,CAhBD","file":"app.js","sourcesContent":["/* global window, document */\nimport Alp from 'alp';\nimport router from 'alp-limosa';\nimport reactredux from 'alp-react-redux';\nimport { init as websocket } from '../websocket/index.browser';\nimport controllers from '../modules/controllers';\nimport routerBuilder from '../routerBuilder';\n\nimport * as moduleDescriptors from '../modules';\n\nconst app = new Alp();\napp.appVersion = window.VERSION;\n\napp.start(async () => {\n  console.log('start');\n  // init\n  await app.init();\n  websocket(app);\n  reactredux(document.getElementById('app'))(app);\n\n  // middlewares\n  app.catchErrors();\n  app.use(router(routerBuilder, controllers)(app));\n\n  if (window.MODULE_IDENTIFIER) {\n    await app.initialRender(moduleDescriptors[window.MODULE_IDENTIFIER], window.initialData);\n  }\n\n  await app.run();\n});\n"]}