{"version":3,"sources":["views/actions/raspberry.js"],"names":[],"mappings":"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","file":"views/actions/raspberry.js","sourcesContent":["export const UPDATE_ALL = 'UPDATE_ALL_RASPBERRY';\nexport const ADD_RASPBERRY = 'ADD_RASPBERRY';\nexport const UPDATE_RASPBERRY = 'UPDATE_RASPBERRY';\nexport const REMOVE_RASPBERRY = 'REMOVE_RASPBERRY';\nexport const SAVING_RASPBERRY = 'SAVING_RASPBERRY';\nexport const SAVED_RASPBERRY = 'SAVED_RASPBERRY';\nexport const SENDING_ACTION_RASPBERRY = 'SENDING_ACTION_RASPBERRY';\nexport const ACTION_SENT_RASPBERRY = 'ACTION_SENT_RASPBERRY';\n\nimport * as websocket from '../../websocket';\n\nexport function updateAll(raspberries) {\n    return {\n        type: UPDATE_ALL,\n        raspberries,\n    };\n}\n\nexport function add(raspberry) {\n    return {\n        type: ADD_RASPBERRY,\n        raspberry,\n    };\n}\n\nexport function update(raspberry) {\n    return {\n        type: UPDATE_RASPBERRY,\n        id: raspberry.id,\n        raspberry,\n    };\n}\n\nexport function remove(id) {\n    return {\n        type: REMOVE_RASPBERRY,\n        id,\n    };\n}\n\nfunction saving(raspberry) {\n    return {\n        type: SAVING_RASPBERRY,\n        id: raspberry.id,\n    };\n}\n\nfunction saved(raspberry, changes) {\n    return {\n        type: SAVED_RASPBERRY,\n        id: raspberry.id,\n        changes,\n    };\n}\n\nfunction sendingAction(raspberry, action) {\n    return {\n        type: SENDING_ACTION_RASPBERRY,\n        id: raspberry.id,\n        action: action,\n    };\n}\n\nfunction actionSent(raspberry, action, result) {\n    return {\n        type: ACTION_SENT_RASPBERRY,\n        id: raspberry.id,\n        action: action,\n        result: result,\n    };\n}\n\n\nexport function changeConfig(dispatch, raspberry, newConfig) {\n    dispatch(saving(raspberry));\n    websocket.changeConfig(raspberry, newConfig, () => {\n        dispatch(saved(raspberry, { data: { ...raspberry.data, config: newConfig } }));\n    });\n}\n\nexport function sendAction(dispatch, raspberries, action) {\n    raspberries.forEach(raspberry => dispatch(sendingAction(raspberry, action)));\n    websocket.sendAction(raspberries, action, (result) => {\n        raspberries.forEach(raspberry => dispatch(actionSent(raspberry, action, result)));\n    });\n}\n\nexport function saveUnknown(dispatch, raspberry, { name, addOrReplace, id }) {\n    dispatch(saving(raspberry));\n    console.log('registerUnknown', raspberry);\n    websocket.registerUnknown(raspberry, { name, addOrReplace, id }, (newRaspberry) => {\n        console.log('registerUnknown :)', newRaspberry);\n        if (newRaspberry) {\n            if (newRaspberry.id !== raspberry.id) {\n                dispatch(remove(raspberry.id));\n                dispatch(update(newRaspberry));\n            } else {\n                dispatch(saved(newRaspberry, newRaspberry));\n            }\n        }\n    });\n}\n"],"sourceRoot":"/"}