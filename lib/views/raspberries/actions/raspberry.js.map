{"version":3,"sources":["views/raspberries/actions/raspberry.js"],"names":[],"mappings":";;;;;;;;;QAqBgB,Y,GAAA,Y;QAOA,U,GAAA,U;QAOA,W,GAAA,W;;AAnChB;;AAEA;;IAAY,S;;;;AAEL,MAAM,gCAAY,iCAAa,wBAAb,EAAuC,aAAvC,CAAlB;AACA,MAAM,oBAAM,iCAAa,eAAb,EAA8B,WAA9B,CAAZ;AACA,MAAM,0BAAS,iCAAa,kBAAb,EAAiC;AAAA,WAAc,EAAE,IAAI,UAAU,EAAhB,EAAoB,oBAApB,EAAd;AAAA,CAAjC,CAAf;AACA,MAAM,0BAAS,iCAAa,kBAAb,EAAiC,IAAjC,CAAf;AACA,MAAM,gDAAoB,iCAAa,oBAAb,EAAmC,mBAAnC,CAA1B;AACA,MAAM,0BAAS,iCAAa,kBAAb,EAAiC;AAAA,WAAc,EAAE,IAAI,UAAU,EAAhB,EAAd;AAAA,CAAjC,CAAf;AACA,MAAM,wBAAQ,iCAAa,iBAAb,EAAgC,CAAC,SAAD,EAAY,OAAZ;AAAA,WAAyB,EAAE,IAAI,UAAU,EAAhB,EAAoB,gBAApB,EAAzB;AAAA,CAAhC,CAAd;AACA,MAAM,wCAAgB,iCACzB,0BADyB,EAEzB,CAAC,SAAD,EAAY,MAAZ;AAAA,WAAwB,EAAE,IAAI,UAAU,EAAhB,EAAoB,cAApB,EAAxB;AAAA,CAFyB,CAAtB;AAIA,MAAM,kCAAa,iCACtB,uBADsB,EAEtB,CAAC,SAAD,EAAY,MAAZ,EAAoB,MAApB;AAAA,WAAgC,EAAE,IAAI,UAAU,EAAhB,EAAoB,cAApB,EAA4B,cAA5B,EAAhC;AAAA,CAFsB,CAAnB;;AAMA,SAAS,YAAT,CAAsB,QAAtB,EAAgC,SAAhC,EAA2C,SAA3C,EAAsD;AACzD,aAAS,OAAO,SAAP,CAAT;AACA,cAAU,YAAV,CAAuB,SAAvB,EAAkC,SAAlC,EAA6C,MAAM;AAC/C,iBAAS,MAAM,SAAN,EAAiB,EAAE,mBAAW,UAAU,IAArB,IAA2B,QAAQ,SAAnC,GAAF,EAAjB,CAAT;AACH,KAFD;AAGH;;AAEM,SAAS,UAAT,CAAoB,QAApB,EAA8B,WAA9B,EAA2C,MAA3C,EAAmD;AACtD,gBAAY,OAAZ,CAAoB;AAAA,eAAa,SAAS,cAAc,SAAd,EAAyB,MAAzB,CAAT,CAAb;AAAA,KAApB;AACA,cAAU,UAAV,CAAqB,WAArB,EAAkC,MAAlC,EAA2C,MAAD,IAAY;AAClD,oBAAY,OAAZ,CAAoB;AAAA,mBAAa,SAAS,WAAW,SAAX,EAAsB,MAAtB,EAA8B,MAA9B,CAAT,CAAb;AAAA,SAApB;AACH,KAFD;AAGH;;AAEM,SAAS,WAAT,CAAqB,QAArB,EAA+B,SAA/B,QAAsE;AAAA,QAA1B,IAA0B,QAA1B,IAA0B;AAAA,QAApB,YAAoB,QAApB,YAAoB;AAAA,QAAN,EAAM,QAAN,EAAM;;AACzE,aAAS,OAAO,SAAP,CAAT;AACA,YAAQ,GAAR,CAAY,iBAAZ,EAA+B,SAA/B;AACA,cAAU,eAAV,CAA0B,SAA1B,EAAqC,EAAE,UAAF,EAAQ,0BAAR,EAAsB,MAAtB,EAArC,EAAkE,YAAD,IAAkB;AAC/E,gBAAQ,GAAR,CAAY,oBAAZ,EAAkC,YAAlC;AACA,YAAI,YAAJ,EAAkB;AACd,gBAAI,aAAa,EAAb,KAAoB,UAAU,EAAlC,EAAsC;AAClC,yBAAS,OAAO,UAAU,EAAjB,CAAT;AACA,yBAAS,OAAO,YAAP,CAAT;AACH,aAHD,MAGO;AACH,yBAAS,MAAM,YAAN,EAAoB,YAApB,CAAT;AACH;AACJ;AACJ,KAVD;AAWH","file":"views/raspberries/actions/raspberry.js","sourcesContent":["import { createAction } from 'alp-react-redux';\n\nimport * as websocket from '../../../websocket';\n\nexport const updateAll = createAction('UPDATE_ALL_RASPBERRIES', 'raspberries');\nexport const add = createAction('ADD_RASPBERRY', 'raspberry');\nexport const update = createAction('UPDATE_RASPBERRY', raspberry => ({ id: raspberry.id, raspberry }));\nexport const remove = createAction('REMOVE_RASPBERRY', 'id');\nexport const screenshotUpdated = createAction('SCREENSHOT_UPDATED', 'id,screenshotDate');\nexport const saving = createAction('SAVING_RASPBERRY', raspberry => ({ id: raspberry.id }));\nexport const saved = createAction('SAVED_RASPBERRY', (raspberry, changes) => ({ id: raspberry.id, changes }));\nexport const sendingAction = createAction(\n    'SENDING_ACTION_RASPBERRY',\n    (raspberry, action) => ({ id: raspberry.id, action })\n);\nexport const actionSent = createAction(\n    'ACTION_SENT_RASPBERRY',\n    (raspberry, action, result) => ({ id: raspberry.id, action, result })\n);\n\n\nexport function changeConfig(dispatch, raspberry, newConfig) {\n    dispatch(saving(raspberry));\n    websocket.changeConfig(raspberry, newConfig, () => {\n        dispatch(saved(raspberry, { data: { ...raspberry.data, config: newConfig } }));\n    });\n}\n\nexport function sendAction(dispatch, raspberries, action) {\n    raspberries.forEach(raspberry => dispatch(sendingAction(raspberry, action)));\n    websocket.sendAction(raspberries, action, (result) => {\n        raspberries.forEach(raspberry => dispatch(actionSent(raspberry, action, result)));\n    });\n}\n\nexport function saveUnknown(dispatch, raspberry, { name, addOrReplace, id }) {\n    dispatch(saving(raspberry));\n    console.log('registerUnknown', raspberry);\n    websocket.registerUnknown(raspberry, { name, addOrReplace, id }, (newRaspberry) => {\n        console.log('registerUnknown :)', newRaspberry);\n        if (newRaspberry) {\n            if (newRaspberry.id !== raspberry.id) {\n                dispatch(remove(raspberry.id));\n                dispatch(update(newRaspberry));\n            } else {\n                dispatch(saved(newRaspberry, newRaspberry));\n            }\n        }\n    });\n}\n"],"sourceRoot":"/"}