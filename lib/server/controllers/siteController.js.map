{"version":3,"sources":["server/controllers/siteController.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;IAAY,a;;AACZ;;;;AACA;;;;AACA;;IAAY,kB;;AACZ;;;;;;;;;;kBAEe,6BAAc;AACzB,SADyB,iBACnB,GADmB,EACd;AACP,eAAO,IAAI,MAAJ,CAAW,aAAX,EAA0B,EAAE,aAAa,mBAAmB,MAAnB,EAAf,EAA1B,CAAP;AACH,KAHwB;AAKnB,cALmB,sBAKR,GALQ,EAKH;AAAA;AAClB,kBAAM,QAAQ,MAAM,2BAAK,GAAL,EAAU,mBAAmB,cAAnB,CAAkC,IAAI,KAAJ,CAAU,EAA5C,CAAV,CAApB;AACA,gBAAI,CAAC,KAAL,EAAY;AACR,sBAAM,2BAAK,GAAL,EAAU,CAAC,AAAD,GAAG,SAAH,EAAa,uCAAb,CAAV,CAAN;AACH;AAJiB;AAKrB,KAVwB;AAYzB,eAZyB,oBAYb,GAZa,EAYR;AACb,YAAI,MAAJ,CAAW,EAAE,4BAAF,EAAX,EAAmC,EAAE,KAAK,IAAI,OAAJ,CAAY,MAAnB,EAA2B,IAAI,IAAI,KAAJ,CAAU,EAAzC,EAAnC;AACH,KAdwB;AAgBzB,WAhByB,mBAgBjB,GAhBiB,EAgBZ;AACT,YAAI,MAAJ,CAAW,EAAE,2BAAF,EAAX,EAAkC,EAAE,KAAK,IAAI,OAAJ,CAAY,MAAnB,EAAlC;AACH;AAlBwB,CAAd,C","file":"server/controllers/siteController.js","sourcesContent":["import newController from 'alp-controller';\nimport * as appDescriptor from '../../views/index';\nimport InstallView from '../../views/InstallView';\nimport NoConfigView from '../../views/NoConfigView';\nimport * as raspberriesManager from '../raspberriesManager';\nimport send from 'koa-sendfile';\n\nexport default newController({\n    index(ctx) {\n        return ctx.render(appDescriptor, { raspberries: raspberriesManager.getAll() });\n    },\n\n    async screenshot(ctx) {\n        const stats = await send(ctx, raspberriesManager.screenshotPath(ctx.query.id));\n        if (!stats) {\n            await send(ctx, `${__dirname}/../../../public/default-screenshot.jpg`);\n        }\n    },\n\n    'no-config'(ctx) {\n        ctx.render({ View: NoConfigView }, { url: ctx.request.origin, ip: ctx.query.ip });\n    },\n\n    install(ctx) {\n        ctx.render({ View: InstallView }, { url: ctx.request.origin });\n    },\n});\n"],"sourceRoot":"/"}